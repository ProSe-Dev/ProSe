session_name: 4 miner PBFT
windows:
- window_name: dev window
  layout: tiled
  shell_command_before:
    - cdf
    - cd prose
  panes:
    - shell_command:
        - printf '\033]2;%s\033\\' '[MINER]localhost:3000'
        - ./gen-protoc.sh
        - go build || read
        - ./prose mine 3000 |& tee log/1.log 
    - shell_command:
        - printf '\033]2;%s\033\\' '[MINER]localhost:3001'
        - while ! nc -z localhost 3000; do sleep 1 && echo -n .; done
        - ./prose mine 3001 -i localhost:3000 |& tee log/2.log
    - shell_command:
        - printf '\033]2;%s\033\\' '[MINER]localhost:3002'
        - while ! nc -z localhost 3000; do sleep 1 && echo -n .; done
        - ./prose mine 3002 -i localhost:3000 |& tee log/3.log
    - shell_command:
        - printf '\033]2;%s\033\\' '[RELAY]3003/8080'
        - cd ../relay
        - go build || read
        - while ! nc -z localhost 3002; do sleep 1 && echo -n .; done
        - ./relay start 8080 3003 -i localhost:3000 |& tee ../prose/log/4.log
